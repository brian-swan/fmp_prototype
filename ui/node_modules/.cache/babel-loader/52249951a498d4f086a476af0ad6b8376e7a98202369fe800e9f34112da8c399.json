{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';// API client\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const api=axios.create({baseURL:process.env.REACT_APP_API_URL||'http://feature-api:8000',headers:{'X-API-Key':'test-api-key','Content-Type':'application/json'}});function FeatureFlagAdmin(){const[flags,setFlags]=useState([]);const[selectedFlag,setSelectedFlag]=useState(null);const[isEditing,setIsEditing]=useState(false);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchFlags();},[]);const fetchFlags=async()=>{try{setLoading(true);const response=await api.get('/api/v1/flags');setFlags(response.data);setError(null);}catch(err){setError('Failed to load feature flags');console.error(err);}finally{setLoading(false);}};const selectFlag=flag=>{setSelectedFlag(flag);setIsEditing(false);};const toggleFlagStatus=async flag=>{try{const updatedFlag={...flag,enabled:!flag.enabled};await api.put(`/api/v1/flags/${flag.key}`,updatedFlag);// Update local state\nsetFlags(flags.map(f=>f.key===flag.key?{...f,enabled:!f.enabled}:f));if(selectedFlag&&selectedFlag.key===flag.key){setSelectedFlag({...selectedFlag,enabled:!selectedFlag.enabled});}}catch(err){setError('Failed to update flag status');console.error(err);}};const saveFlag=async updatedFlag=>{try{await api.put(`/api/v1/flags/${updatedFlag.key}`,updatedFlag);// Update local state\nsetFlags(flags.map(f=>f.key===updatedFlag.key?updatedFlag:f));setSelectedFlag(updatedFlag);setIsEditing(false);setError(null);}catch(err){setError('Failed to save flag');console.error(err);}};const createFlag=async newFlag=>{try{const response=await api.post('/api/v1/flags',newFlag);// Update local state\nsetFlags([...flags,response.data]);setSelectedFlag(response.data);setIsEditing(false);setError(null);}catch(err){setError('Failed to create flag');console.error(err);}};const deleteFlag=async flagKey=>{if(!window.confirm(`Are you sure you want to delete the flag \"${flagKey}\"?`)){return;}try{await api.delete(`/api/v1/flags/${flagKey}`);// Update local state\nsetFlags(flags.filter(f=>f.key!==flagKey));if(selectedFlag&&selectedFlag.key===flagKey){setSelectedFlag(null);}}catch(err){setError('Failed to delete flag');console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"feature-flag-admin\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Feature Flag Management\"})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),children:\"Dismiss\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flag-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Feature Flags\"}),/*#__PURE__*/_jsx(\"button\",{className:\"create-button\",onClick:()=>{setSelectedFlag({key:'',name:'',description:'',enabled:true,variations:[{id:`var-${Date.now()}-1`,name:'On',value:{type:'boolean',value:true}},{id:`var-${Date.now()}-2`,name:'Off',value:{type:'boolean',value:false}}],default_variation_id:'',rules:[]});setIsEditing(true);},children:\"Create New Flag\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading flags...\"}):/*#__PURE__*/_jsx(\"ul\",{children:flags.map(flag=>/*#__PURE__*/_jsx(\"li\",{className:selectedFlag&&selectedFlag.key===flag.key?'selected':'',children:/*#__PURE__*/_jsxs(\"div\",{className:\"flag-item\",onClick:()=>selectFlag(flag),children:[/*#__PURE__*/_jsx(\"span\",{className:\"flag-name\",children:flag.name}),/*#__PURE__*/_jsx(\"div\",{className:\"flag-status\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"toggle\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:flag.enabled,onChange:e=>{e.stopPropagation();toggleFlagStatus(flag);}}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-slider\"})]})})]})},flag.key))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flag-details\",children:selectedFlag?isEditing?/*#__PURE__*/_jsx(FlagEditor,{flag:selectedFlag,onSave:flag=>selectedFlag.key?saveFlag(flag):createFlag(flag),onCancel:()=>{setIsEditing(false);if(!selectedFlag.key){setSelectedFlag(null);}}}):/*#__PURE__*/_jsx(FlagDetail,{flag:selectedFlag,onEdit:()=>setIsEditing(true),onDelete:()=>deleteFlag(selectedFlag.key),onToggleStatus:()=>toggleFlagStatus(selectedFlag)}):/*#__PURE__*/_jsx(\"div\",{className:\"no-selection\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Select a feature flag or create a new one\"})})})]})]});}function FlagDetail(_ref){let{flag,onEdit,onDelete,onToggleStatus}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"flag-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:flag.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onEdit,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:onDelete,children:\"Delete\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"toggle\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:flag.enabled,onChange:onToggleStatus}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-slider\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Key:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:flag.key})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:flag.description||'No description'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Created:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:new Date(flag.created_at).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Last Updated:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:new Date(flag.updated_at).toLocaleString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Variations\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"variations-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Value\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Default\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:flag.variations.map(variation=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:variation.id}),/*#__PURE__*/_jsx(\"td\",{children:variation.name}),/*#__PURE__*/_jsx(\"td\",{children:JSON.stringify(variation.value.value)}),/*#__PURE__*/_jsx(\"td\",{children:variation.id===flag.default_variation_id?'✓':''})]},variation.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Targeting Rules\"}),flag.rules&&flag.rules.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"rules-list\",children:flag.rules.map((rule,index)=>{var _flag$variations$find;return/*#__PURE__*/_jsxs(\"div\",{className:\"rule-item\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Rule \",index+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rule-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rule-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Type:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:rule.type})]}),rule.type==='user'&&/*#__PURE__*/_jsxs(\"div\",{className:\"rule-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"User IDs:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:rule.user_ids.join(', ')})]}),rule.type==='percentage'&&/*#__PURE__*/_jsxs(\"div\",{className:\"rule-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Percentage:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[rule.percentage,\"%\"]})]}),rule.type==='attribute'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rule-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Attribute:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:rule.attribute})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rule-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Operator:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:rule.operator})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rule-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Value:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:JSON.stringify(rule.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rule-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Serves:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:((_flag$variations$find=flag.variations.find(v=>v.id===rule.variation_id))===null||_flag$variations$find===void 0?void 0:_flag$variations$find.name)||'Unknown'})]})]})]},rule.id||index);})}):/*#__PURE__*/_jsx(\"p\",{children:\"No targeting rules defined\"})]})]})]});}function FlagEditor(_ref2){let{flag,onSave,onCancel}=_ref2;const[formData,setFormData]=useState({...flag,variations:[...flag.variations],rules:[...(flag.rules||[])]});const[error,setError]=useState(null);const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleVariationChange=(index,field,value)=>{const updatedVariations=[...formData.variations];updatedVariations[index]={...updatedVariations[index],[field]:value};setFormData({...formData,variations:updatedVariations});};const handleVariationValueChange=(index,value)=>{const updatedVariations=[...formData.variations];const variation=updatedVariations[index];const valueType=variation.value.type;let parsedValue;try{if(valueType==='boolean'){parsedValue=value==='true';}else if(valueType==='number'){parsedValue=parseFloat(value);}else if(valueType==='json'){parsedValue=JSON.parse(value);}else{parsedValue=value;}updatedVariations[index]={...variation,value:{...variation.value,value:parsedValue}};setFormData({...formData,variations:updatedVariations});setError(null);}catch(err){setError(`Invalid value for ${valueType}: ${err.message}`);}};const handleVariationTypeChange=(index,type)=>{const updatedVariations=[...formData.variations];const variation=updatedVariations[index];// Convert the value to the new type\nlet newValue;switch(type){case'boolean':newValue=Boolean(variation.value.value);break;case'number':newValue=isNaN(parseFloat(variation.value.value))?0:parseFloat(variation.value.value);break;case'string':newValue=String(variation.value.value);break;case'json':newValue=typeof variation.value.value==='object'?variation.value.value:{value:variation.value.value};break;default:newValue=variation.value.value;}updatedVariations[index]={...variation,value:{type,value:newValue}};setFormData({...formData,variations:updatedVariations});};const addVariation=()=>{const newVariation={id:`var-${Date.now()}`,name:`Variation ${formData.variations.length+1}`,value:{type:'boolean',value:false}};setFormData({...formData,variations:[...formData.variations,newVariation]});};const removeVariation=index=>{if(formData.variations.length<=1){setError('Cannot remove the last variation');return;}const updatedVariations=[...formData.variations];const removedVariation=updatedVariations[index];updatedVariations.splice(index,1);// Update default variation if it was removed\nlet updatedDefaultVariation=formData.default_variation_id;if(removedVariation.id===formData.default_variation_id){updatedDefaultVariation=updatedVariations[0].id;}setFormData({...formData,variations:updatedVariations,default_variation_id:updatedDefaultVariation});};const handleSubmit=e=>{e.preventDefault();// Validate form data\nif(!formData.key){setError('Flag key is required');return;}if(!formData.name){setError('Flag name is required');return;}if(!formData.default_variation_id){setError('Default variation must be selected');return;}// Validate variations\nif(formData.variations.length===0){setError('At least one variation is required');return;}for(const variation of formData.variations){if(!variation.name){setError('All variations must have a name');return;}}// Prepare data for saving\nconst now=new Date().toISOString();const flagToSave={...formData,created_at:formData.created_at||now,updated_at:now};onSave(flagToSave);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flag-editor\",children:[/*#__PURE__*/_jsx(\"h2\",{children:flag.key?'Edit Flag':'Create New Flag'}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),children:\"Dismiss\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Basic Information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Flag Key:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"key\",value:formData.key,onChange:handleChange,placeholder:\"unique-flag-key\",required:true,disabled:!!flag.key// Disable editing key for existing flags\n})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,placeholder:\"Flag Name\",required:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Description:\",/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description||'',onChange:handleChange,placeholder:\"Description of what this flag controls\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"enabled\",checked:formData.enabled,onChange:e=>setFormData({...formData,enabled:e.target.checked})}),\"Enabled\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Variations\"}),formData.variations.map((variation,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"variation-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"variation-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Variation \",index+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>removeVariation(index),children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"variation-fields\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:variation.name,onChange:e=>handleVariationChange(index,'name',e.target.value),required:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Value Type:\",/*#__PURE__*/_jsxs(\"select\",{value:variation.value.type,onChange:e=>handleVariationTypeChange(index,e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"boolean\",children:\"Boolean\"}),/*#__PURE__*/_jsx(\"option\",{value:\"string\",children:\"String\"}),/*#__PURE__*/_jsx(\"option\",{value:\"number\",children:\"Number\"}),/*#__PURE__*/_jsx(\"option\",{value:\"json\",children:\"JSON\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Value:\",variation.value.type==='boolean'?/*#__PURE__*/_jsxs(\"select\",{value:variation.value.value.toString(),onChange:e=>handleVariationValueChange(index,e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"true\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"false\"})]}):variation.value.type==='json'?/*#__PURE__*/_jsx(\"textarea\",{value:JSON.stringify(variation.value.value,null,2),onChange:e=>handleVariationValueChange(index,e.target.value)}):/*#__PURE__*/_jsx(\"input\",{type:variation.value.type==='number'?'number':'text',value:variation.value.value.toString(),onChange:e=>handleVariationValueChange(index,e.target.value)})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"radio-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"default_variation\",checked:formData.default_variation_id===variation.id,onChange:()=>setFormData({...formData,default_variation_id:variation.id}),required:true}),\"Default Variation\"]})})]})]},variation.id)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-button\",onClick:addVariation,children:\"Add Variation\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-button\",onClick:onCancel,children:\"Cancel\"})]})]})]});}export default FeatureFlagAdmin;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","api","create","baseURL","process","env","REACT_APP_API_URL","headers","FeatureFlagAdmin","flags","setFlags","selectedFlag","setSelectedFlag","isEditing","setIsEditing","loading","setLoading","error","setError","fetchFlags","response","get","data","err","console","selectFlag","flag","toggleFlagStatus","updatedFlag","enabled","put","key","map","f","saveFlag","createFlag","newFlag","post","deleteFlag","flagKey","window","confirm","delete","filter","className","children","onClick","name","description","variations","id","Date","now","value","type","default_variation_id","rules","checked","onChange","e","stopPropagation","FlagEditor","onSave","onCancel","FlagDetail","onEdit","onDelete","onToggleStatus","_ref","created_at","toLocaleString","updated_at","variation","JSON","stringify","length","rule","index","_flag$variations$find","user_ids","join","percentage","attribute","operator","find","v","variation_id","_ref2","formData","setFormData","handleChange","target","handleVariationChange","field","updatedVariations","handleVariationValueChange","valueType","parsedValue","parseFloat","parse","message","handleVariationTypeChange","newValue","Boolean","isNaN","String","addVariation","newVariation","removeVariation","removedVariation","splice","updatedDefaultVariation","handleSubmit","preventDefault","toISOString","flagToSave","onSubmit","placeholder","required","disabled","toString"],"sources":["/Users/bswan/Repos/fmp_prototype/ui/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// API client\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://feature-api:8000',\n  headers: {\n    'X-API-Key': 'test-api-key',\n    'Content-Type': 'application/json'\n  }\n});\n\nfunction FeatureFlagAdmin() {\n  const [flags, setFlags] = useState([]);\n  const [selectedFlag, setSelectedFlag] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchFlags();\n  }, []);\n\n  const fetchFlags = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/api/v1/flags');\n      setFlags(response.data);\n      setError(null);\n    } catch (err) {\n      setError('Failed to load feature flags');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const selectFlag = (flag) => {\n    setSelectedFlag(flag);\n    setIsEditing(false);\n  };\n\n  const toggleFlagStatus = async (flag) => {\n    try {\n      const updatedFlag = { ...flag, enabled: !flag.enabled };\n      await api.put(`/api/v1/flags/${flag.key}`, updatedFlag);\n      \n      // Update local state\n      setFlags(flags.map(f => f.key === flag.key ? { ...f, enabled: !f.enabled } : f));\n      \n      if (selectedFlag && selectedFlag.key === flag.key) {\n        setSelectedFlag({ ...selectedFlag, enabled: !selectedFlag.enabled });\n      }\n    } catch (err) {\n      setError('Failed to update flag status');\n      console.error(err);\n    }\n  };\n\n  const saveFlag = async (updatedFlag) => {\n    try {\n      await api.put(`/api/v1/flags/${updatedFlag.key}`, updatedFlag);\n      \n      // Update local state\n      setFlags(flags.map(f => f.key === updatedFlag.key ? updatedFlag : f));\n      setSelectedFlag(updatedFlag);\n      setIsEditing(false);\n      setError(null);\n    } catch (err) {\n      setError('Failed to save flag');\n      console.error(err);\n    }\n  };\n\n  const createFlag = async (newFlag) => {\n    try {\n      const response = await api.post('/api/v1/flags', newFlag);\n      \n      // Update local state\n      setFlags([...flags, response.data]);\n      setSelectedFlag(response.data);\n      setIsEditing(false);\n      setError(null);\n    } catch (err) {\n      setError('Failed to create flag');\n      console.error(err);\n    }\n  };\n\n  const deleteFlag = async (flagKey) => {\n    if (!window.confirm(`Are you sure you want to delete the flag \"${flagKey}\"?`)) {\n      return;\n    }\n    \n    try {\n      await api.delete(`/api/v1/flags/${flagKey}`);\n      \n      // Update local state\n      setFlags(flags.filter(f => f.key !== flagKey));\n      \n      if (selectedFlag && selectedFlag.key === flagKey) {\n        setSelectedFlag(null);\n      }\n    } catch (err) {\n      setError('Failed to delete flag');\n      console.error(err);\n    }\n  };\n\n  return (\n    <div className=\"feature-flag-admin\">\n      <header>\n        <h1>Feature Flag Management</h1>\n      </header>\n      \n      {error && (\n        <div className=\"error-message\">\n          {error}\n          <button onClick={() => setError(null)}>Dismiss</button>\n        </div>\n      )}\n      \n      <div className=\"admin-layout\">\n        <div className=\"flag-list\">\n          <h2>Feature Flags</h2>\n          \n          <button \n            className=\"create-button\"\n            onClick={() => {\n              setSelectedFlag({\n                key: '',\n                name: '',\n                description: '',\n                enabled: true,\n                variations: [\n                  { id: `var-${Date.now()}-1`, name: 'On', value: { type: 'boolean', value: true } },\n                  { id: `var-${Date.now()}-2`, name: 'Off', value: { type: 'boolean', value: false } }\n                ],\n                default_variation_id: '',\n                rules: []\n              });\n              setIsEditing(true);\n            }}\n          >\n            Create New Flag\n          </button>\n          \n          {loading ? (\n            <div>Loading flags...</div>\n          ) : (\n            <ul>\n              {flags.map(flag => (\n                <li key={flag.key} className={selectedFlag && selectedFlag.key === flag.key ? 'selected' : ''}>\n                  <div className=\"flag-item\" onClick={() => selectFlag(flag)}>\n                    <span className=\"flag-name\">{flag.name}</span>\n                    <div className=\"flag-status\">\n                      <label className=\"toggle\">\n                        <input \n                          type=\"checkbox\" \n                          checked={flag.enabled} \n                          onChange={(e) => {\n                            e.stopPropagation();\n                            toggleFlagStatus(flag);\n                          }}\n                        />\n                        <span className=\"toggle-slider\"></span>\n                      </label>\n                    </div>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n        \n        <div className=\"flag-details\">\n          {selectedFlag ? (\n            isEditing ? (\n              <FlagEditor \n                flag={selectedFlag} \n                onSave={(flag) => selectedFlag.key ? saveFlag(flag) : createFlag(flag)} \n                onCancel={() => {\n                  setIsEditing(false);\n                  if (!selectedFlag.key) {\n                    setSelectedFlag(null);\n                  }\n                }}\n              />\n            ) : (\n              <FlagDetail \n                flag={selectedFlag} \n                onEdit={() => setIsEditing(true)} \n                onDelete={() => deleteFlag(selectedFlag.key)}\n                onToggleStatus={() => toggleFlagStatus(selectedFlag)}\n              />\n            )\n          ) : (\n            <div className=\"no-selection\">\n              <p>Select a feature flag or create a new one</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction FlagDetail({ flag, onEdit, onDelete, onToggleStatus }) {\n  return (\n    <div className=\"flag-detail\">\n      <div className=\"detail-header\">\n        <h2>{flag.name}</h2>\n        <div className=\"actions\">\n          <button onClick={onEdit}>Edit</button>\n          <button className=\"delete\" onClick={onDelete}>Delete</button>\n          <label className=\"toggle\">\n            <input type=\"checkbox\" checked={flag.enabled} onChange={onToggleStatus} />\n            <span className=\"toggle-slider\"></span>\n          </label>\n        </div>\n      </div>\n      \n      <div className=\"detail-body\">\n        <div className=\"detail-section\">\n          <h3>Basic Information</h3>\n          <div className=\"detail-item\">\n            <span className=\"label\">Key:</span>\n            <span className=\"value\">{flag.key}</span>\n          </div>\n          <div className=\"detail-item\">\n            <span className=\"label\">Description:</span>\n            <span className=\"value\">{flag.description || 'No description'}</span>\n          </div>\n          <div className=\"detail-item\">\n            <span className=\"label\">Created:</span>\n            <span className=\"value\">{new Date(flag.created_at).toLocaleString()}</span>\n          </div>\n          <div className=\"detail-item\">\n            <span className=\"label\">Last Updated:</span>\n            <span className=\"value\">{new Date(flag.updated_at).toLocaleString()}</span>\n          </div>\n        </div>\n        \n        <div className=\"detail-section\">\n          <h3>Variations</h3>\n          <table className=\"variations-table\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>Name</th>\n                <th>Value</th>\n                <th>Default</th>\n              </tr>\n            </thead>\n            <tbody>\n              {flag.variations.map(variation => (\n                <tr key={variation.id}>\n                  <td>{variation.id}</td>\n                  <td>{variation.name}</td>\n                  <td>{JSON.stringify(variation.value.value)}</td>\n                  <td>{variation.id === flag.default_variation_id ? '✓' : ''}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        \n        <div className=\"detail-section\">\n          <h3>Targeting Rules</h3>\n          {flag.rules && flag.rules.length > 0 ? (\n            <div className=\"rules-list\">\n              {flag.rules.map((rule, index) => (\n                <div key={rule.id || index} className=\"rule-item\">\n                  <h4>Rule {index + 1}</h4>\n                  <div className=\"rule-details\">\n                    <div className=\"rule-detail\">\n                      <span className=\"label\">Type:</span>\n                      <span className=\"value\">{rule.type}</span>\n                    </div>\n                    {rule.type === 'user' && (\n                      <div className=\"rule-detail\">\n                        <span className=\"label\">User IDs:</span>\n                        <span className=\"value\">{rule.user_ids.join(', ')}</span>\n                      </div>\n                    )}\n                    {rule.type === 'percentage' && (\n                      <div className=\"rule-detail\">\n                        <span className=\"label\">Percentage:</span>\n                        <span className=\"value\">{rule.percentage}%</span>\n                      </div>\n                    )}\n                    {rule.type === 'attribute' && (\n                      <>\n                        <div className=\"rule-detail\">\n                          <span className=\"label\">Attribute:</span>\n                          <span className=\"value\">{rule.attribute}</span>\n                        </div>\n                        <div className=\"rule-detail\">\n                          <span className=\"label\">Operator:</span>\n                          <span className=\"value\">{rule.operator}</span>\n                        </div>\n                        <div className=\"rule-detail\">\n                          <span className=\"label\">Value:</span>\n                          <span className=\"value\">{JSON.stringify(rule.value)}</span>\n                        </div>\n                      </>\n                    )}\n                    <div className=\"rule-detail\">\n                      <span className=\"label\">Serves:</span>\n                      <span className=\"value\">\n                        {flag.variations.find(v => v.id === rule.variation_id)?.name || 'Unknown'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p>No targeting rules defined</p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction FlagEditor({ flag, onSave, onCancel }) {\n  const [formData, setFormData] = useState({\n    ...flag,\n    variations: [...flag.variations],\n    rules: [...(flag.rules || [])]\n  });\n  const [error, setError] = useState(null);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n\n  const handleVariationChange = (index, field, value) => {\n    const updatedVariations = [...formData.variations];\n    updatedVariations[index] = {\n      ...updatedVariations[index],\n      [field]: value\n    };\n    setFormData({\n      ...formData,\n      variations: updatedVariations\n    });\n  };\n\n  const handleVariationValueChange = (index, value) => {\n    const updatedVariations = [...formData.variations];\n    const variation = updatedVariations[index];\n    const valueType = variation.value.type;\n    \n    let parsedValue;\n    try {\n      if (valueType === 'boolean') {\n        parsedValue = value === 'true';\n      } else if (valueType === 'number') {\n        parsedValue = parseFloat(value);\n      } else if (valueType === 'json') {\n        parsedValue = JSON.parse(value);\n      } else {\n        parsedValue = value;\n      }\n      \n      updatedVariations[index] = {\n        ...variation,\n        value: {\n          ...variation.value,\n          value: parsedValue\n        }\n      };\n      \n      setFormData({\n        ...formData,\n        variations: updatedVariations\n      });\n      setError(null);\n    } catch (err) {\n      setError(`Invalid value for ${valueType}: ${err.message}`);\n    }\n  };\n\n  const handleVariationTypeChange = (index, type) => {\n    const updatedVariations = [...formData.variations];\n    const variation = updatedVariations[index];\n    \n    // Convert the value to the new type\n    let newValue;\n    switch (type) {\n      case 'boolean':\n        newValue = Boolean(variation.value.value);\n        break;\n      case 'number':\n        newValue = isNaN(parseFloat(variation.value.value)) ? 0 : parseFloat(variation.value.value);\n        break;\n      case 'string':\n        newValue = String(variation.value.value);\n        break;\n      case 'json':\n        newValue = typeof variation.value.value === 'object' ? \n          variation.value.value : \n          { value: variation.value.value };\n        break;\n      default:\n        newValue = variation.value.value;\n    }\n    \n    updatedVariations[index] = {\n      ...variation,\n      value: {\n        type,\n        value: newValue\n      }\n    };\n    \n    setFormData({\n      ...formData,\n      variations: updatedVariations\n    });\n  };\n\n  const addVariation = () => {\n    const newVariation = {\n      id: `var-${Date.now()}`,\n      name: `Variation ${formData.variations.length + 1}`,\n      value: {\n        type: 'boolean',\n        value: false\n      }\n    };\n    \n    setFormData({\n      ...formData,\n      variations: [...formData.variations, newVariation]\n    });\n  };\n\n  const removeVariation = (index) => {\n    if (formData.variations.length <= 1) {\n      setError('Cannot remove the last variation');\n      return;\n    }\n    \n    const updatedVariations = [...formData.variations];\n    const removedVariation = updatedVariations[index];\n    updatedVariations.splice(index, 1);\n    \n    // Update default variation if it was removed\n    let updatedDefaultVariation = formData.default_variation_id;\n    if (removedVariation.id === formData.default_variation_id) {\n      updatedDefaultVariation = updatedVariations[0].id;\n    }\n    \n    setFormData({\n      ...formData,\n      variations: updatedVariations,\n      default_variation_id: updatedDefaultVariation\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // Validate form data\n    if (!formData.key) {\n      setError('Flag key is required');\n      return;\n    }\n    \n    if (!formData.name) {\n      setError('Flag name is required');\n      return;\n    }\n    \n    if (!formData.default_variation_id) {\n      setError('Default variation must be selected');\n      return;\n    }\n    \n    // Validate variations\n    if (formData.variations.length === 0) {\n      setError('At least one variation is required');\n      return;\n    }\n    \n    for (const variation of formData.variations) {\n      if (!variation.name) {\n        setError('All variations must have a name');\n        return;\n      }\n    }\n    \n    // Prepare data for saving\n    const now = new Date().toISOString();\n    const flagToSave = {\n      ...formData,\n      created_at: formData.created_at || now,\n      updated_at: now\n    };\n    \n    onSave(flagToSave);\n  };\n\n  return (\n    <div className=\"flag-editor\">\n      <h2>{flag.key ? 'Edit Flag' : 'Create New Flag'}</h2>\n      \n      {error && (\n        <div className=\"error-message\">\n          {error}\n          <button onClick={() => setError(null)}>Dismiss</button>\n        </div>\n      )}\n      \n      <form onSubmit={handleSubmit}>\n        <div className=\"form-section\">\n          <h3>Basic Information</h3>\n          \n          <div className=\"form-row\">\n            <label>\n              Flag Key:\n              <input \n                type=\"text\" \n                name=\"key\" \n                value={formData.key} \n                onChange={handleChange}\n                placeholder=\"unique-flag-key\"\n                required\n                disabled={!!flag.key}  // Disable editing key for existing flags\n              />\n            </label>\n          </div>\n          \n          <div className=\"form-row\">\n            <label>\n              Name:\n              <input \n                type=\"text\" \n                name=\"name\" \n                value={formData.name} \n                onChange={handleChange}\n                placeholder=\"Flag Name\"\n                required\n              />\n            </label>\n          </div>\n          \n          <div className=\"form-row\">\n            <label>\n              Description:\n              <textarea \n                name=\"description\" \n                value={formData.description || ''} \n                onChange={handleChange}\n                placeholder=\"Description of what this flag controls\"\n              />\n            </label>\n          </div>\n          \n          <div className=\"form-row\">\n            <label className=\"checkbox-label\">\n              <input \n                type=\"checkbox\" \n                name=\"enabled\" \n                checked={formData.enabled} \n                onChange={(e) => setFormData({...formData, enabled: e.target.checked})}\n              />\n              Enabled\n            </label>\n          </div>\n        </div>\n        \n        <div className=\"form-section\">\n          <h3>Variations</h3>\n          \n          {formData.variations.map((variation, index) => (\n            <div key={variation.id} className=\"variation-row\">\n              <div className=\"variation-header\">\n                <h4>Variation {index + 1}</h4>\n                <button \n                  type=\"button\" \n                  className=\"remove-button\"\n                  onClick={() => removeVariation(index)}\n                >\n                  Remove\n                </button>\n              </div>\n              \n              <div className=\"variation-fields\">\n                <div className=\"form-row\">\n                  <label>\n                    Name:\n                    <input \n                      type=\"text\" \n                      value={variation.name} \n                      onChange={(e) => handleVariationChange(index, 'name', e.target.value)}\n                      required\n                    />\n                  </label>\n                </div>\n                \n                <div className=\"form-row\">\n                  <label>\n                    Value Type:\n                    <select \n                      value={variation.value.type} \n                      onChange={(e) => handleVariationTypeChange(index, e.target.value)}\n                    >\n                      <option value=\"boolean\">Boolean</option>\n                      <option value=\"string\">String</option>\n                      <option value=\"number\">Number</option>\n                      <option value=\"json\">JSON</option>\n                    </select>\n                  </label>\n                </div>\n                \n                <div className=\"form-row\">\n                  <label>\n                    Value:\n                    {variation.value.type === 'boolean' ? (\n                      <select \n                        value={variation.value.value.toString()} \n                        onChange={(e) => handleVariationValueChange(index, e.target.value)}\n                      >\n                        <option value=\"true\">true</option>\n                        <option value=\"false\">false</option>\n                      </select>\n                    ) : variation.value.type === 'json' ? (\n                      <textarea \n                        value={JSON.stringify(variation.value.value, null, 2)} \n                        onChange={(e) => handleVariationValueChange(index, e.target.value)}\n                      />\n                    ) : (\n                      <input \n                        type={variation.value.type === 'number' ? 'number' : 'text'} \n                        value={variation.value.value.toString()} \n                        onChange={(e) => handleVariationValueChange(index, e.target.value)}\n                      />\n                    )}\n                  </label>\n                </div>\n                \n                <div className=\"form-row\">\n                  <label className=\"radio-label\">\n                    <input \n                      type=\"radio\" \n                      name=\"default_variation\" \n                      checked={formData.default_variation_id === variation.id} \n                      onChange={() => setFormData({...formData, default_variation_id: variation.id})}\n                      required\n                    />\n                    Default Variation\n                  </label>\n                </div>\n              </div>\n            </div>\n          ))}\n          \n          <button type=\"button\" className=\"add-button\" onClick={addVariation}>\n            Add Variation\n          </button>\n        </div>\n        \n        <div className=\"form-actions\">\n          <button type=\"submit\" className=\"save-button\">Save</button>\n          <button type=\"button\" className=\"cancel-button\" onClick={onCancel}>Cancel</button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default FeatureFlagAdmin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}